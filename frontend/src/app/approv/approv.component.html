<div class="card">
    <div class="row">
      <div class="col">
        <button class="btn btn-success" data-toggle="modal" data-target="#createapprovform"><i class="fa fa-user-plus"></i></button>
        <button class="btn btn-success" data-toggle="modal" data-target="#"><i class="fa fa-upload"></i></button>
        <button class="btn btn-success"><i class="fa fa-download"></i></button>
      </div>
      <div class="col">
          <input class="input_search" placeholder="search" name="search" [(ngModel)]="e" (keyup)="search()" autocomplete="off">
      </div>
    </div>
    <div class="row" id="tableau">
        <div class="col">
            <table class="table table-bordered">
                <thead>
                  <tr class="first_row_table">
                    <th>N°</th>
                    <th>Utilisateur</th>
                    <th>Date</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="row_table" *ngFor="let approv of approvsFilter; let index=index;">
                    <td>{{ approv.approvs }}</td>
                    <td>Porato</td>
                    <td> 01/12/2021 </td>
                    <td>
                      <i class="fa fa-info mr-3" (click)="infoApprovs(approv.approvs)" data-toggle="modal" data-target="#infoproduitform" ></i>
                      <i class="fa fa-trash mr-3" (click)="infoApprovs(approv.approvs)" data-toggle="modal" data-target="#modifapprovform"></i>
                    </td>
                  </tr>
                </tbody>
            </table>
        </div>
    </div>
    
  <!--Start Create Produit Modal-->
  <div class="modal" id="infoproduitform" tabindex="-1" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Info coupon</h5>
        </div>
        <div class="modal-body">
          <table class="table table-bordered">
            <thead>
              <tr class="first_row_table">
                <th>Produits</th>
                <th>Quantité</th>
              </tr>
            </thead>
            <tbody>
              <tr class="row_table" *ngFor="let approv of approvsItems; let index=index;">
                <td>{{ approv.name }}</td>
                <td>{{ approv.quantite }}</td>
              </tr>
            </tbody>
          </table>
          <div class="row">
            <div class="col"> <button class="btn btn-success" (click)=valider()>valider</button> </div>
            <div class="col"> <button class="btn btn-warning" (click)=rejeter()>rejeter</button> </div>
            <div class="col"> <button class="btn btn-danger" (click)=annuler()>Annuler</button> </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  
  <!--Start Create Produit Modal-->
  <div class="modal" id="createapprovform" tabindex="-1" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Creer Approv</h5>
        </div>
        <div class="modal-body">

          <div class="row mb-1">
            <div class="col">
                <select class="form-select" name="prod" autocomplete="off" [(ngModel)]="new_produit">
                    <option *ngFor="let produit of produits" value="{{ produit.id }}">{{ produit.name }}</option>
                </select>
            </div>
            <div class="col"><input class="form-control" type="number" name="quantite" [(ngModel)]="quantite" autocomplete="off"></div>
            <div class="col"><button class="btn btn-primary" (click)='updatelistprod()'><i class="fa fa-check"></i></button></div>
        </div>
          
          <form (ngSubmit)="addApprov(f)" #f="ngForm">
                <table class="table table-bordered">
                  <thead>
                    <tr class="first_row_table">
                      <th>Nom</th>
                      <th>Quantite</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="row_table" *ngFor="let produit of listproduits; let index=index;">
                      <td>{{ produit.name }}</td>
                      <td>{{ produit.qte }}</td>
                      <td>
                        <i class="fa fa-trash mr-3" (click)="delete(index)"></i>
                      </td>
    
                    </tr>
                  </tbody>
              </table>
                
              <div class="row mb-1">
                  <div class="col">
                      <button type="button" class="btn btn-primary" type="submit"><i class="fa fa-check"></i>Save</button>
                  </div>
              </div>
                
          </form>
        </div>
          
      </div>
    </div>
  </div>
  <!-- End Create Modal Produit-->


  <!--Start Create Produit Modal-->
  <div class="modal" id="modifapprovform" tabindex="-1" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modif Approv</h5>
        </div>
        <div class="modal-body">

          <div class="row mb-1">
            <div class="col">
                <select class="form-select" name="prod" autocomplete="off" [(ngModel)]="new_produit">
                    <option *ngFor="let produit of produits" value="{{ produit.name }}">{{ produit.name }}</option>
                </select>
            </div>
            <div class="col"><input class="form-control" type="number" name="quantite" [(ngModel)]="quantite" autocomplete="off"></div>
            <div class="col"><button class="btn btn-primary" (click)='updateitem()'><i class="fa fa-check"></i></button></div>
        </div>
          
                <table class="table table-bordered">
                  <thead>
                    <tr class="first_row_table">
                      <th>Nom</th>
                      <th>Quantite</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="row_table" *ngFor="let app of approvsItems; let index=index;">
                      <td>{{ app.name }}</td>
                      <td>{{ app.quantite }}</td>
                      <td>
                        <i class="fa fa-trash mr-3" (click)="deleteitem(index)"></i>
                      </td>
                    </tr>
                  </tbody>
              </table>
                
              <div class="row mb-1">
                  <div class="col">
                      <button class="btn btn-primary" (click)="modifApprovs()"><i class="fa fa-check"></i>Save</button>
                  </div>
              </div>
                
        </div>
          
      </div>
    </div>
  </div>
  <!-- End Create Modal Produit-->
  
  